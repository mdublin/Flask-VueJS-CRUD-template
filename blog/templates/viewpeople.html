
<!-- importing macros.html as macros which is a macro used for handling each entry in the blogful db -->
{% import "CRUD_macros.html" as macros %}

<!-- The extends informs the templating engine that this template “extends” another template, base.html, establishing a link between the templates. This sends what the code below does over to base.html -->
{% extends "base.html" %}


{% block content %}

<script type="text/javascript" src="https://npmcdn.com/vue@1.0.26/dist/vue.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<br></br>
<br></br>

<div class="row">
	<div class="col-lg-6">
		<form action="" method="GET">
			<div class="input-group">
				<input type="text" class="form-control" id="search_form_input" name="search_for" placeholder="Search for...">
				<span class="input-group-btn">
				<button class="btn btn-primary btn-outline" type="submit">Search!</button>
          </span>
    </div><!-- /input-group -->
</form>
</div>
</div>

<br></br>

{% if people %}

    {% for person in people %}


    <div class="list-group">
      <a href="#" class="list-group-item active">
	      <b>Name:</b> {{ person.firstname }} {{ person.lastname }}
      </a>
      <a href="#" class="list-group-item"><b>DOB:</b> {{ person.dob }}</a>
	  <a href="#" class="list-group-item"><b>postal code:</b> {{ person.zipcode }}</a>
      <a class="list-group-item"><button type="button" class="btn btn-danger" data-toggle="modal" data-target="#DeleteModal">DELETE</button>   <button type="button" class="btn btn-info" data-toggle="modal" data-target="#UpdateModal">UPDATE</button></a>
    </div>


<!-- DELETE Modal -->
<!-- <form action={{ url_for('viewpeople') }} role="form" method="POST"> -->

<form action="" role="form" method="POST">
	<input type="hidden" name="csrf_token" value="{{ csrf_token() }}" /> 
	<div class="modal fade" id="DeleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title-warning" id="myModalLabel">Are you sure you want to delete this person?</h4>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-danger" name="delete_id" value={{ person.id }}>Confirm Delete</button>
            </div>
        </div>
    </div>
</div>
</form>

<!-- DELETE Modal -->

<form action="" role="form" method="POST">
	<input type="hidden" name="csrf_token" value="{{ csrf_token() }}" /> 
	<div class="modal fade" id="UpdateModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <b>First name: </b><input class="form-control" type="text" name="firstname" placeholder="{{ person.firstname }}">
                    <b>Last Name: </b><input class="form-control" type="text" name="lastname" placeholder="{{ person.lastname }}">
                    <b>DOB: </b><input class="form-control" type="text" name="DOB" placeholder="{{ person.dob }}">
                    <b>Postal code: </b><input class="form-control" type="text" name="zipcode" placeholder="{{ person.zipcode }}">
                        <input type="hidden" name="db_id" value={{ person.id }} />
                    </div>
                    <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-success">Save Changes</button>
                </div>
            </div>
        </div>
    </div>
</form>


<script>
   
</script>



    {% endfor %}


    <ul class="pager">
        {% if has_prev %}
        <li class="previous" >
        <a href="{{ url_for('viewpeople', search_for=search_for, page=page - 1) }}">&larr;previous</a>
        </li>
        {% endif %}
        {% if has_next %}
        <li class="next">
        <a href="{{ url_for('viewpeople', search_for=search_for, page=page + 1) }}">&rarr;next</a>
        </li>
        {% endif %}
    </ul>

{% elif noresult %}
    <h1>Sorry, we couldn't find that person. Please try to search for another person...</h1>

{% endif %}
    


<!-- entries object is returned/rendered to this file by entries() in view.py -->
<!-- entries object is a SQLALchemy session query that's querying entry objects (its type is actually a class). It contains all of our database entries in our Entry table and is iterated through with the for loop below and passed as an argument to the macros.render_entry() function (rendering each one with the render_entry macro) -->




{% endblock %}

